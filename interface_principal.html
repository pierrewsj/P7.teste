<!DOCTYPE html><html lang="pt-BR"><head><meta charset="utf-8"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><title>Stellantis - Menu</title><link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&amp;display=swap" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&amp;display=swap" rel="stylesheet"/><style> :root { --cor-fundo:#0b1d30; --cor-caixa:#1c2b3d; --cor-primaria:#00d2ff; --cor-secundaria:#FFA726; --cor-texto:#ffffff; } * { box-sizing: border-box; } body { margin:0; font-family:'Orbitron',sans-serif; background-color:var(--cor-fundo); background-image:radial-gradient(circle at top left,#1b2735,#090a0f); color:var(--cor-texto); padding:1rem; display:flex; justify-content:center; align-items:center; min-height:100vh; } .container { max-width:400px; width:90%; background:rgba(28,43,61,0.95); padding:2rem; border-radius:20px; box-shadow:0 0 30px rgba(0,255,255,0.15), inset 0 0 10px rgba(0,255,255,0.05); backdrop-filter:blur(10px); animation:fadeInUp .6s ease-in-out; text-align:center; } h1 { font-size:1.8rem; letter-spacing:6px; background:linear-gradient(90deg,var(--cor-primaria),#3a7bd5); -webkit-background-clip:text; -webkit-text-fill-color:transparent; font-weight:800; text-shadow:0 0 10px rgba(0,210,255,0.5); margin-bottom:.5rem; } .botoes { display:flex; flex-direction:column; gap:1rem; } .botao { background:linear-gradient(135deg,#3a7bd5,var(--cor-primaria)); color:var(--cor-texto); border:1px solid var(--cor-primaria); padding:.75rem 1.5rem; border-radius:14px; font-size:1rem; font-weight:600; cursor:pointer; box-shadow:0 0 6px rgba(0,210,255,0.3); transition:all .3s; } .botao:hover { transform:scale(1.03); box-shadow:0 0 10px rgba(0,210,255,0.45); } .usuario { margin-top:1rem; font-size:.9rem; color:#9eefff; font-family:'Inter',sans-serif; } .modal-overlay { position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.5); display:none; justify-content:center; align-items:center; z-index:1000; } .modal { background:var(--cor-caixa); padding:1.5rem; border-radius:12px; text-align:center; max-width:320px; box-shadow:0 0 20px rgba(0,0,0,0.3); } .modal p { margin-bottom:1rem; } .modal button { background:var(--cor-secundaria); border:none; padding:.5rem 1rem; border-radius:8px; font-weight:bold; color:white; cursor:pointer; } @keyframes fadeInUp { from{opacity:0; transform:translateY(15px);} to{opacity:1; transform:translateY(0);} } </style><script src="https://cdn.jsdelivr.net/npm/exceljs/dist/exceljs.min.js"></script><script src="https://cdn.jsdelivr.net/npm/file-saver/dist/FileSaver.min.js"></script><script> (function(){ document.addEventListener('contextmenu', e => e.preventDefault(), true); document.addEventListener('keydown', function(e){ const k = e.key.toLowerCase(); const ctrl = e.ctrlKey || e.metaKey; if (k === 'f12') { e.preventDefault(); return; } if (ctrl && ['s','u','p','c','a','j','i'].includes(k)) { e.preventDefault(); return; } if (e.shiftKey && ctrl && ['i','j','c'].includes(k)) { e.preventDefault(); return; } }, true); setInterval(function(){ const threshold = 160; if (window.outerWidth - window.innerWidth > threshold || window.outerHeight - window.innerHeight > threshold){ console.warn('DevTools detectado.'); } }, 1200); })(); </script></head><body><div class="container" style="max-width: 420px; width: 100%; background: rgba(28,43,61,0.95); padding: 2rem; border-radius: 20px; box-shadow: 0 0 30px rgba(0,255,255,0.15), inset 0 0 10px rgba(0,255,255,0.05); backdrop-filter: blur(10px); animation: fadeInUp .6s ease-in-out; text-align: center;"><h1>STELLANTIS</h1><h2 style="color: var(--cor-primaria); font-size: 1.2rem; font-weight: 600; letter-spacing: 2px; text-transform: uppercase; opacity: 0.85; text-align: center; font-family: 'Orbitron', sans-serif;">Segurança Patrimonial</h2><div class="botoes"><button class="botao" onclick="location.href='controle_p7_industrializacao.html'">Veículos - Industrialização</button><button class="botao" onclick="location.href='controle_p7_comissao_seguro.html'">Veículos - Comissão Seguro</button><button class="botao" onclick="location.href='controle_p7_qualidade.html'">Veículos - Qualidade / CI</button><button class="botao" onclick="trocarUsuario()">Trocar usuário</button><button class="botao" onclick="finalizarTurno()">Finalizar turno</button></div><div class="usuario" id="usuarioExibido"></div></div><div class="modal-overlay" id="appModalOverlay"><div class="modal" id="appModalBox" style="animation: fadeInUp .2s ease;"><h3 id="appModalTitle" style="margin-top:0;margin-bottom:.5rem;">Aviso</h3><p id="appModalMsg">Mensagem</p><div style="display:flex;gap:.5rem;justify-content:center;margin-top:.75rem;"><button id="appModalOk">OK</button></div></div></div><div class="modal-overlay" id="confirmModalOverlay"><div class="modal" id="confirmModalBox" style="animation: fadeInUp .2s ease;"><h3 id="confirmModalTitle" style="margin-top:0;margin-bottom:.5rem;">Confirmação</h3><p id="confirmModalMsg">Tem certeza?</p><div style="display:flex;gap:.5rem;justify-content:center;margin-top:.75rem;"><button id="confirmYes">Sim</button><button id="confirmNo">Cancelar</button></div></div></div><script>eval(atob('ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsICgpID0+IHsKICBjb25zdCB1ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzdWFyaW8iKXx8IiIsIHIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgicmVnaXN0cm8iKXx8IiI7CiAgaWYodXx8cikgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInVzdWFyaW9FeGliaWRvIikudGV4dENvbnRlbnQgPSBg8J+RpCAke3V9JHtyPyIgLyAiK3I6IiJ9YDsKfSk7CgpmdW5jdGlvbiBzaG93QXBwTW9kYWwoe3RpdGxlPSJBdmlzbyIsIG1lc3NhZ2U9IiIsIG9uT2s9bnVsbH0pewogIGNvbnN0IG92ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcE1vZGFsT3ZlcmxheScpOwogIGNvbnN0IHQgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcE1vZGFsVGl0bGUnKTsKICBjb25zdCBtICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHBNb2RhbE1zZycpOwogIGNvbnN0IG9rID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcE1vZGFsT2snKTsKICB0LnRleHRDb250ZW50ID0gdGl0bGU7IG0udGV4dENvbnRlbnQgPSBtZXNzYWdlOyBvdi5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwogIGNvbnN0IGNsZWFudXAgPSAoKSA9PiB7IG92LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IG9rLm9uY2xpY2sgPSBudWxsOyBpZiAob25PaykgdHJ5IHsgb25PaygpOyB9IGNhdGNoKGUpe30gfTsKICBvay5vbmNsaWNrID0gY2xlYW51cDsgb3Yub25jbGljayA9IChlKT0+eyBpZihlLnRhcmdldD09PW92KSBjbGVhbnVwKCk7IH07Cn0KCmZ1bmN0aW9uIHNob3dDb25maXJtTW9kYWwoe3RpdGxlPSJDb25maXJtYcOnw6NvIiwgbWVzc2FnZT0iIiwgb25ZZXM9bnVsbCwgb25Obz1udWxsfSl7CiAgY29uc3Qgb3YgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlybU1vZGFsT3ZlcmxheScpOwogIGNvbnN0IHQgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpcm1Nb2RhbFRpdGxlJyk7CiAgY29uc3QgbSAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlybU1vZGFsTXNnJyk7CiAgY29uc3QgeWVzPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlybVllcycpOwogIGNvbnN0IG5vID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpcm1ObycpOwogIHQudGV4dENvbnRlbnQgPSB0aXRsZTsgbS50ZXh0Q29udGVudCA9IG1lc3NhZ2U7IG92LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CiAgY29uc3QgY2xlYW51cCA9ICgpID0+IHsgb3Yuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgeWVzLm9uY2xpY2sgPSBudWxsOyBuby5vbmNsaWNrID0gbnVsbDsgfTsKICB5ZXMub25jbGljayA9ICgpPT57IGNsZWFudXAoKTsgaWYgKG9uWWVzKSB0cnkgeyBvblllcygpOyB9IGNhdGNoKGUpe30gfTsKICBuby5vbmNsaWNrICA9ICgpPT57IGNsZWFudXAoKTsgaWYgKG9uTm8pICB0cnkgeyBvbk5vKCk7ICB9IGNhdGNoKGUpe30gfTsKICBvdi5vbmNsaWNrICA9IChlKT0+eyBpZihlLnRhcmdldD09PW92KXsgY2xlYW51cCgpOyBpZihvbk5vKSB0cnl7IG9uTm8oKTsgfSBjYXRjaChlKXt9IH0gfTsKfQoKYXN5bmMgCi8qIHJlbW92aWRvIGJsb2NvIGR1cGxpY2FkbyBmaW5hbGl6YXJUdXJubyAqLwoKCmFzeW5jIAovKiByZW1vdmlkbyBleHBvcnRhclBsYW5pbGhhRmluYWwgZHVwbGljYWRvICov'))</script><script>eval(atob('Ly8gQ2hlY2FnZW0gZGUgYmlibGlvdGVjYXMgKHNlbSBtZXhlciBubyBsYXlvdXQpCmZ1bmN0aW9uIF9fcDdfbGlic09rKCkgewogIGNvbnN0IG9rID0gdHlwZW9mIHdpbmRvdy5FeGNlbEpTICE9PSAidW5kZWZpbmVkIiAmJiB0eXBlb2Ygd2luZG93LnNhdmVBcyAhPT0gInVuZGVmaW5lZCI7CiAgaWYgKCFvaykgewogICAgbGV0IGZhbHRhbmRvID0gW107CiAgICBpZiAodHlwZW9mIHdpbmRvdy5FeGNlbEpTID09PSAidW5kZWZpbmVkIikgZmFsdGFuZG8ucHVzaCgiRXhjZWxKUyIpOwogICAgaWYgKHR5cGVvZiB3aW5kb3cuc2F2ZUFzID09PSAidW5kZWZpbmVkIikgZmFsdGFuZG8ucHVzaCgiRmlsZVNhdmVyIik7CiAgICBhbGVydCgiTsOjbyBmb2kgcG9zc8OtdmVsIGNhcnJlZ2FyOiAiICsgZmFsdGFuZG8uam9pbigiLCAiKSArICIuXG5cblZlcmlmaXF1ZSBzdWEgaW50ZXJuZXQgb3UgbyBjYXJyZWdhbWVudG8gZG9zIHNjcmlwdHMgbm8gPGhlYWQ+LiIpOwogIH0KICByZXR1cm4gb2s7Cn0KCmZ1bmN0aW9uIF9fcDdfcGFyc2VTdG9yYWdlT3JFbXB0eShrZXkpIHsKICB0cnkgewogICAgY29uc3QgdHh0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTsKICAgIGlmICghdHh0KSByZXR1cm4gW107CiAgICBjb25zdCBhcnIgPSBKU09OLnBhcnNlKHR4dCk7CiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShhcnIpID8gYXJyIDogW107CiAgfSBjYXRjaCAoZSkgewogICAgY29uc29sZS5lcnJvcigiRmFsaGEgYW8gbGVyIiwga2V5LCBlKTsKICAgIHJldHVybiBbXTsKICB9Cn0KCmZ1bmN0aW9uIF9fcDdfYWRkV29ya3NoZWV0RnJvbU9iamVjdHMod2IsIHNoZWV0TmFtZSwgcm93cykgewogIGNvbnN0IHdzID0gd2IuYWRkV29ya3NoZWV0KHNoZWV0TmFtZSk7CiAgaWYgKCFyb3dzIHx8IHJvd3MubGVuZ3RoID09PSAwKSB7CiAgICB3cy5hZGRSb3coWyJTZW0gZGFkb3MiXSk7CiAgICByZXR1cm47CiAgfQogIGNvbnN0IGNvbHMgPSBPYmplY3Qua2V5cyhyb3dzWzBdKTsKICB3cy5hZGRSb3coY29scyk7CiAgY29uc3QgaGVhZGVyID0gd3MuZ2V0Um93KDEpOwogIGhlYWRlci5mb250ID0geyBib2xkOiB0cnVlIH07CiAgaGVhZGVyLmFsaWdubWVudCA9IHsgdmVydGljYWw6ICdtaWRkbGUnIH07CgogIGZvciAoY29uc3QgciBvZiByb3dzKSB7CiAgICB3cy5hZGRSb3coY29scy5tYXAoYyA9PiByW2NdKSk7CiAgfQogIGNvbHMuZm9yRWFjaCgoYywgaSkgPT4gewogICAgbGV0IG1heCA9IGMubGVuZ3RoOwogICAgcm93cy5mb3JFYWNoKHIgPT4gewogICAgICBjb25zdCB2YWwgPSByW2NdID09IG51bGwgPyAiIiA6IFN0cmluZyhyW2NdKTsKICAgICAgaWYgKHZhbC5sZW5ndGggPiBtYXgpIG1heCA9IHZhbC5sZW5ndGg7CiAgICB9KTsKICAgIHdzLmdldENvbHVtbihpKzEpLndpZHRoID0gTWF0aC5taW4oTWF0aC5tYXgoMTAsIG1heCArIDIpLCA2MCk7CiAgfSk7Cn0KCmZ1bmN0aW9uIF9fcDdfZm9ybWF0Tm93Rm9yTmFtZSgpIHsKICBjb25zdCBkID0gbmV3IERhdGUoKTsKICBjb25zdCBkZCA9IFN0cmluZyhkLmdldERhdGUoKSkucGFkU3RhcnQoMiwgIjAiKTsKICBjb25zdCBtbSA9IFN0cmluZyhkLmdldE1vbnRoKCkrMSkucGFkU3RhcnQoMiwgIjAiKTsKICBjb25zdCB5eXl5ID0gZC5nZXRGdWxsWWVhcigpOwogIGNvbnN0IEhIID0gU3RyaW5nKGQuZ2V0SG91cnMoKSkucGFkU3RhcnQoMiwgIjAiKTsKICBjb25zdCBNTSA9IFN0cmluZyhkLmdldE1pbnV0ZXMoKSkucGFkU3RhcnQoMiwgIjAiKTsKICByZXR1cm4gYCR7ZGR9LSR7bW19LSR7eXl5eX0gLSAke0hIfWgke01NfWA7Cn0KCi8vID09PSBTb2JyZXNjcmV2ZSBhcyBmdW7Dp8O1ZXMgb3JpZ2luYWlzIHNlbSBhbHRlcmFyIG8gdmlzdWFsID09PQoKLyogcmVtb3ZpZG8gYmxvY28gZXhwb3J0YXJQbGFuaWxoYUZpbmFsIGFudGlnbyAqLwoKCmZ1bmN0aW9uIGZpbmFsaXphclR1cm5vKCkgewogIHRyeSB7CiAgICBjb25zdCBkYWRvc0NoYXNzaSAgID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGFiZWxhQ2hhc3NpJykgfHwgJ1tdJyk7CiAgICBjb25zdCBkYWRvc0NvbWlzc2FvID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGFiZWxhQ29taXNzYW9TZWd1cm8nKSB8fCAnW10nKTsKICAgIGNvbnN0IGRhZG9zUXVhbGlkYWRlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGFiZWxhUXVhbGlkYWRlJykgfHwgJ1tdJyk7CiAgICBjb25zdCBzZW1EYWRvcyA9ICghZGFkb3NDaGFzc2k/Lmxlbmd0aCkgJiYgKCFkYWRvc0NvbWlzc2FvPy5sZW5ndGgpICYmICghZGFkb3NRdWFsaWRhZGU/Lmxlbmd0aCk7CmlmIChzZW1EYWRvcykgewogICAgICBpZiAodHlwZW9mIHNob3dBcHBNb2RhbCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHNob3dBcHBNb2RhbCh7IHRpdGxlOidBdGVuw6fDo28nLCBtZXNzYWdlOidOw6NvIGjDoSBkYWRvcyBwYXJhIGV4cG9ydGFyLicsIG9uT2s6ICgpPT57IGxvY2F0aW9uLmhyZWY9J2luZGV4Lmh0bWwnOyB9IH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGFsZXJ0KCdOw6NvIGjDoSBkYWRvcyBwYXJhIGV4cG9ydGFyLicpOwogICAgICAgIGxvY2F0aW9uLmhyZWY9J2luZGV4Lmh0bWwnOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBzaG93Q29uZmlybU1vZGFsKHsKICAgICAgdGl0bGU6ICdDb25maXJtYcOnw6NvJywKICAgICAgbWVzc2FnZTogJ1RlbSBjZXJ0ZXphIHF1ZSBkZXNlamEgZXhwb3J0YXIgZGFkb3MgZSBzYWlyPycsCiAgICAgIG9uWWVzOiBhc3luYyAoKSA9PiB7IGF3YWl0IGV4cG9ydGFyUGxhbmlsaGFGaW5hbChkYWRvc0NoYXNzaSwgZGFkb3NDb21pc3NhbywgZGFkb3NRdWFsaWRhZGUpOyB9LAogICAgICBvbk5vOiAoKSA9PiB7fQogICAgfSk7CiAgfSBjYXRjaCAoZSkgewogICAgY29uc29sZS5lcnJvcihlKTsKICAgIGlmICh0eXBlb2Ygc2hvd0FwcE1vZGFsID09PSAnZnVuY3Rpb24nKSBzaG93QXBwTW9kYWwoe3RpdGxlOidFcnJvJywgbWVzc2FnZTonRXJybyBhbyBwcm9jZXNzYXIgYSBmaW5hbGl6YcOnw6NvLid9KTsKICAgIGVsc2UgYWxlcnQoJ0Vycm8gYW8gcHJvY2Vzc2FyIGEgZmluYWxpemHDp8Ojby4nKTsKICB9Cn0='))</script><script>eval(atob('YXN5bmMgCi8qIHJlbW92aWRvIGJsb2NvIGV4cG9ydGFyUGxhbmlsaGFGaW5hbCBhbnRpZ28gKi8='))</script><script>eval(atob('ZnVuY3Rpb24gdHJvY2FyVXN1YXJpbygpewogIGlmICh0eXBlb2Ygc2hvd0NvbmZpcm1Nb2RhbCA9PT0gJ2Z1bmN0aW9uJyl7CiAgICBzaG93Q29uZmlybU1vZGFsKHsKICAgICAgdGl0bGU6ICdUcm9jYXIgdXN1w6FyaW8nLAogICAgICBtZXNzYWdlOiBgRGVzZWphIHRyb2NhciBkZSB1c3XDoXJpbyBzZW0gZmluYWxpemFyIG8gdHVybm8/XG5cblNlIGVzY29saGVyICJTaW0iLCBvcyBkYWRvcyBhdHVhaXMgc2Vyw6NvIG1hbnRpZG9zLmAsCiAgICAgIG9uWWVzOiBmdW5jdGlvbigpeyBsb2NhdGlvbi5ocmVmID0gJ2luZGV4Lmh0bWwnOyB9LAogICAgICBvbk5vOiBmdW5jdGlvbigpewogICAgICAgIGlmICh0eXBlb2Ygc2hvd0FwcE1vZGFsID09PSAnZnVuY3Rpb24nKXsKICAgICAgICAgIHNob3dBcHBNb2RhbCh7dGl0bGU6J09wZXJhw6fDo28gY2FuY2VsYWRhJywgbWVzc2FnZTonRGFkb3MgcHJlc2VydmFkb3MuIFBlcm1hbmVjZW5kbyBubyBtZW51Lid9KTsKICAgICAgICB9IGVsc2UgeyBhbGVydCgnT3BlcmHDp8OjbyBjYW5jZWxhZGEsIGRhZG9zIHByZXNlcnZhZG9zLicpOyB9CiAgICAgIH0KICAgIH0pOwogIH0gZWxzZSB7CiAgICB2YXIgbWFudGVyID0gY29uZmlybSgnRGVzZWphIHRyb2NhciBkZSB1c3XDoXJpbyBtYW50ZW5kbyBvcyBkYWRvcyBhdHVhaXM/Jyk7CiAgICBpZiAobWFudGVyKXsgbG9jYXRpb24uaHJlZiA9ICdpbmRleC5odG1sJzsgfQogICAgZWxzZSB7IGFsZXJ0KCdPcGVyYcOnw6NvIGNhbmNlbGFkYSwgZGFkb3MgcHJlc2VydmFkb3MuJyk7IH0KICB9Cn0='))</script><script>eval(atob('YXN5bmMgZnVuY3Rpb24gZXhwb3J0YXJQbGFuaWxoYUZpbmFsKGRhZG9zQ2hhc3NpLCBkYWRvc0NvbWlzc2FvLCBkYWRvc1F1YWxpZGFkZSl7CiAgaWYgKCF3aW5kb3cuRXhjZWxKUyB8fCAhd2luZG93LnNhdmVBcykgewogICAgaWYgKHR5cGVvZiBzaG93QXBwTW9kYWwgPT09ICdmdW5jdGlvbicpIHsKICAgICAgc2hvd0FwcE1vZGFsKHt0aXRsZTonRXJybycsIG1lc3NhZ2U6J0JpYmxpb3RlY2FzIEV4Y2VsSlMvRmlsZVNhdmVyIG7Do28gY2FycmVnYWRhcy4nfSk7CiAgICB9IGVsc2UgewogICAgICBhbGVydCgnQmlibGlvdGVjYXMgRXhjZWxKUy9GaWxlU2F2ZXIgbsOjbyBjYXJyZWdhZGFzLicpOwogICAgfQogICAgcmV0dXJuOwogIH0KICB0cnkgewogICAgY29uc3Qgd2IgPSBuZXcgRXhjZWxKUy5Xb3JrYm9vaygpOwoKICAgIGNvbnN0IGFkZFNoZWV0ID0gKG5hbWUsIHJvd3MpID0+IHsKICAgICAgY29uc3Qgd3MgPSB3Yi5hZGRXb3Jrc2hlZXQobmFtZSk7CiAgICAgIGlmICghQXJyYXkuaXNBcnJheShyb3dzKSB8fCByb3dzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHdzLmFkZFJvdyhbJ1NlbSBkYWRvcyddKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc3Qga2V5cyA9IFsuLi5uZXcgU2V0KHJvd3MuZmxhdE1hcChyID0+IE9iamVjdC5rZXlzKHIgfHwge30pKSldOwogICAgICB3cy5hZGRSb3coa2V5cyk7CiAgICAgIHdzLmdldFJvdygxKS5mb250ID0ge2JvbGQ6dHJ1ZX07CiAgICAgIHJvd3MuZm9yRWFjaChyID0+IHdzLmFkZFJvdyhrZXlzLm1hcChrID0+IChyICYmIHJba10gIT0gbnVsbCkgPyByW2tdIDogJycpKSk7CiAgICAgIGtleXMuZm9yRWFjaCgoayxpKSA9PiB7CiAgICAgICAgbGV0IG1heCA9IFN0cmluZyh3cy5nZXRSb3coMSkuZ2V0Q2VsbChpKzEpLnZhbHVlIHx8ICcnKS5sZW5ndGg7CiAgICAgICAgcm93cy5mb3JFYWNoKHIgPT4geyBjb25zdCB0ID0gciAmJiByW2tdICE9IG51bGwgPyBTdHJpbmcocltrXSkgOiAnJzsgaWYgKHQubGVuZ3RoID4gbWF4KSBtYXggPSB0Lmxlbmd0aDsgfSk7CiAgICAgICAgd3MuZ2V0Q29sdW1uKGkrMSkud2lkdGggPSBNYXRoLm1pbihNYXRoLm1heCgxMCwgbWF4ICsgMiksIDYwKTsKICAgICAgfSk7CiAgICB9OwoKICAgIC8vIEFiYXMgaW5kaXZpZHVhaXMKICAgIGFkZFNoZWV0KCdjb250cm9sZSBkZSB2ZcOtY3Vsb3MgaW5kdXN0cmlhbGl6YcOnw6NvJywgZGFkb3NDaGFzc2kpOwogICAgYWRkU2hlZXQoJ2NvbWlzc8OjbyBkZSBzZWd1cm8nLCBkYWRvc0NvbWlzc2FvKTsKICAgIGFkZFNoZWV0KCdjb250cm9sZSBkZSB2ZcOtY3Vsb3MgcXVhbGlkYWRlJywgZGFkb3NRdWFsaWRhZGUpOwoKICAgIC8vIE1lc3RyYSAoY29uc29saWRhZG8pCiAgICBjb25zdCB0YWdnZWQgPSBbCiAgICAgIC4uLihBcnJheS5pc0FycmF5KGRhZG9zQ2hhc3NpKSAgID8gZGFkb3NDaGFzc2kgICA6IFtdKS5tYXAociA9PiAoeyBvcmlnZW06ICdJbmR1c3RyaWFsaXphw6fDo28nLCAgICAuLi5yIH0pKSwKICAgICAgLi4uKEFycmF5LmlzQXJyYXkoZGFkb3NDb21pc3NhbykgPyBkYWRvc0NvbWlzc2FvIDogW10pLm1hcChyID0+ICh7IG9yaWdlbTogJ0NvbWlzc8OjbyBkZSBTZWd1cm8nLCAgLi4uciB9KSksCiAgICAgIC4uLihBcnJheS5pc0FycmF5KGRhZG9zUXVhbGlkYWRlKT8gZGFkb3NRdWFsaWRhZGU6IFtdKS5tYXAociA9PiAoeyBvcmlnZW06ICdRdWFsaWRhZGUgLyBDSScsICAgICAgLi4uciB9KSksCiAgICBdOwoKICAgIGlmICh0YWdnZWQubGVuZ3RoID4gMCkgewogICAgICBjb25zdCBwcmVmZXJyZWQgPSBbJ29yaWdlbScsJ3NldG9yJywndHVybm8nLCdjb250cm9sYWRvcicsJ2NoYXNzaScsJ29ic2VydmFjYW8nLCdkYXRhSG9yYSddOwogICAgICBjb25zdCBhbGxLZXlzID0gWy4uLm5ldyBTZXQoWy4uLnByZWZlcnJlZCwgLi4udGFnZ2VkLmZsYXRNYXAociA9PiBPYmplY3Qua2V5cyhyKSldKV07CiAgICAgIGNvbnN0IHdzTSA9IHdiLmFkZFdvcmtzaGVldCgnTWVzdHJhIChjb25zb2xpZGFkbyknKTsKICAgICAgLy8gQ2FiZcOnYWxobwogICAgICB3c00uYWRkUm93KGFsbEtleXMpOwogICAgICB3c00uZ2V0Um93KDEpLmZvbnQgPSB7IGJvbGQ6IHRydWUgfTsKICAgICAgLy8gTGluaGFzCiAgICAgIHRhZ2dlZC5mb3JFYWNoKHIgPT4gd3NNLmFkZFJvdyhhbGxLZXlzLm1hcChrID0+IChyICYmIHJba10gIT0gbnVsbCkgPyByW2tdIDogJycpKSk7CiAgICAgIC8vIExhcmd1cmEgYXV0b23DoXRpY2EKICAgICAgYWxsS2V5cy5mb3JFYWNoKChrLGkpID0+IHsKICAgICAgICBsZXQgbWF4ID0gU3RyaW5nKHdzTS5nZXRSb3coMSkuZ2V0Q2VsbChpKzEpLnZhbHVlIHx8ICcnKS5sZW5ndGg7CiAgICAgICAgdGFnZ2VkLmZvckVhY2gociA9PiB7IGNvbnN0IHQgPSByICYmIHJba10gIT0gbnVsbCA/IFN0cmluZyhyW2tdKSA6ICcnOyBpZiAodC5sZW5ndGggPiBtYXgpIG1heCA9IHQubGVuZ3RoOyB9KTsKICAgICAgICB3c00uZ2V0Q29sdW1uKGkrMSkud2lkdGggPSBNYXRoLm1pbihNYXRoLm1heCgxMCwgbWF4ICsgMiksIDYwKTsKICAgICAgfSk7CiAgICB9CgogICAgY29uc3QgYnVmZmVyID0gYXdhaXQgd2IueGxzeC53cml0ZUJ1ZmZlcigpOwogICAgY29uc3QgZCA9IG5ldyBEYXRlKCk7CiAgICBjb25zdCBub21lID0gYFJlbGF0w7NyaW8gLSAkeyhsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndHVybm8nKXx8J1R1cm5vJyl9IC0gJHtTdHJpbmcoZC5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsJzAnKX0tJHtTdHJpbmcoZC5nZXRNb250aCgpKzEpLnBhZFN0YXJ0KDIsJzAnKX0tJHtkLmdldEZ1bGxZZWFyKCl9IC0gJHtTdHJpbmcoZC5nZXRIb3VycygpKS5wYWRTdGFydCgyLCcwJyl9aCR7U3RyaW5nKGQuZ2V0TWludXRlcygpKS5wYWRTdGFydCgyLCcwJyl9Lnhsc3hgOwogICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtidWZmZXJdLCB7IHR5cGU6ICJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCIgfSk7CiAgICBzYXZlQXMoYmxvYiwgbm9tZSk7CgogICAgdHJ5IHsgbG9jYWxTdG9yYWdlLmNsZWFyKCk7IGlmIChzZXNzaW9uU3RvcmFnZSAmJiBzZXNzaW9uU3RvcmFnZS5jbGVhcikgc2Vzc2lvblN0b3JhZ2UuY2xlYXIoKTsgfSBjYXRjaChlKXt9CiAgICBpZiAodHlwZW9mIHNob3dBcHBNb2RhbCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICBzaG93QXBwTW9kYWwoeyB0aXRsZTonVHVybm8gZmluYWxpemFkbycsIG1lc3NhZ2U6J0EgcGxhbmlsaGEgZm9pIGdlcmFkYSBlIG8gdHVybm8gZm9pIGZpbmFsaXphZG8uJywgb25PazogKCk9PnsgbG9jYXRpb24uaHJlZj0naW5kZXguaHRtbCc7IH0gfSk7CiAgICAgIHNldFRpbWVvdXQoKCk9PnsgbG9jYXRpb24uaHJlZj0naW5kZXguaHRtbCc7IH0sIDE1MDApOwogICAgfSBlbHNlIHsKICAgICAgbG9jYXRpb24uaHJlZiA9ICdpbmRleC5odG1sJzsKICAgIH0KICB9IGNhdGNoIChlKSB7CiAgICBjb25zb2xlLmVycm9yKGUpOwogICAgaWYgKHR5cGVvZiBzaG93QXBwTW9kYWwgPT09ICdmdW5jdGlvbicpIHNob3dBcHBNb2RhbCh7dGl0bGU6J0Vycm8nLCBtZXNzYWdlOidGYWxoYSBuYSBnZXJhw6fDo28gZGEgcGxhbmlsaGEuJ30pOwogICAgZWxzZSBhbGVydCgnRmFsaGEgbmEgZ2VyYcOnw6NvIGRhIHBsYW5pbGhhLicpOwogIH0KfQ=='))</script><script></script><script>eval(atob('Ly8gPT09PSBPdmVycmlkZXMgY29tICJPYnMuIiBhcGVuYXMgbm8gY29uc29saWRhZG8gPT09PQooZnVuY3Rpb24oKXsKICBmdW5jdGlvbiBwYXJzZUpTT04oa2V5KXsKICAgIHRyeXsgY29uc3QgdCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7IHJldHVybiB0ID8gSlNPTi5wYXJzZSh0KSA6IFtdOyB9Y2F0Y2goZSl7IHJldHVybiBbXTsgfQogIH0KICBmdW5jdGlvbiBoYXZlTGlicygpeyByZXR1cm4gdHlwZW9mIEV4Y2VsSlMgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBzYXZlQXMgIT09ICd1bmRlZmluZWQnOyB9CiAgYXN5bmMgZnVuY3Rpb24gY29uZmlybVdyYXAodGl0bGUsIG1lc3NhZ2UpewogICAgaWYgKHR5cGVvZiBzaG93Q29uZmlybU1vZGFsID09PSAnZnVuY3Rpb24nKXsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgIHNob3dDb25maXJtTW9kYWwoe3RpdGxlLCBtZXNzYWdlLCBvblllczooKT0+cmVzb2x2ZSh0cnVlKSwgb25ObzooKT0+cmVzb2x2ZShmYWxzZSl9KTsKICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHdpbmRvdy5jb25maXJtKCh0aXRsZT90aXRsZSsiXFxuXFxuIjoiIikrbWVzc2FnZSkpOwogIH0KICBmdW5jdGlvbiBhbGVydFdyYXAodGl0bGUsIG1lc3NhZ2UpewogICAgaWYgKHR5cGVvZiBzaG93QXBwTW9kYWwgPT09ICdmdW5jdGlvbicpeyBzaG93QXBwTW9kYWwoe3RpdGxlLCBtZXNzYWdlfSk7IH0KICAgIGVsc2UgYWxlcnQoKHRpdGxlP3RpdGxlKyI6ICI6IiIpICsgbWVzc2FnZSk7CiAgfQoKICAvLyBUcm9jYXIgVXN1w6FyaW8KICB3aW5kb3cudHJvY2FyVXN1YXJpbyA9IGZ1bmN0aW9uKCl7CiAgICB0cnl7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c3VhcmlvJyk7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdyZWdpc3RybycpOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2xlYXJMb2dpbk9uY2UnLCcxJyk7CiAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzdWFyaW8nKTsKICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgncmVnaXN0cm8nKTsKICAgIH1jYXRjaChlKXsgY29uc29sZS5lcnJvcihlKTsgfQogICAgbG9jYXRpb24uaHJlZiA9ICdpbmRleC5odG1sP2xvZ291dD0xJzsKICB9OwoKICAvLyBGaW5hbGl6YXIgVHVybm8KICB3aW5kb3cuZmluYWxpemFyVHVybm8gPSBhc3luYyBmdW5jdGlvbigpewogICAgdHJ5ewogICAgICBjb25zdCBkYWRvc0NoYXNzaSAgICA9IHBhcnNlSlNPTigndGFiZWxhQ2hhc3NpJyk7CiAgICAgIGNvbnN0IGRhZG9zQ29taXNzYW8gID0gcGFyc2VKU09OKCd0YWJlbGFDb21pc3Nhb1NlZ3VybycpOwogICAgICBjb25zdCBkYWRvc1F1YWxpZGFkZSA9IHBhcnNlSlNPTigndGFiZWxhUXVhbGlkYWRlJyk7CiAgICAgIGNvbnN0IHNlbURhZG9zID0gKCFkYWRvc0NoYXNzaS5sZW5ndGgpICYmICghZGFkb3NDb21pc3Nhby5sZW5ndGgpICYmICghZGFkb3NRdWFsaWRhZGUubGVuZ3RoKTsKICAgICAgaWYgKHNlbURhZG9zKXsKICAgICAgICBhbGVydFdyYXAoJ0F0ZW7Dp8OjbycsJ07Do28gaMOhIGRhZG9zIHBhcmEgZXhwb3J0YXIuJyk7CiAgICAgICAgCiAgICAgICAgdHJ5ewogICAgICAgICAgY29uc3QgX19rZXlzPVsndXN1YXJpbycsJ3JlZ2lzdHJvJywndHVybm8nLCd0YWJlbGFDaGFzc2knLCd0YWJlbGFDb21pc3Nhb1NlZ3VybycsJ3RhYmVsYVF1YWxpZGFkZScsJ2NvbnRyb2xlVmVpY3Vsb3NEYXRhJywnY29udHJvbGVfaW5kdXN0cmlhbGl6YWNhb19lc3RhZG8nLCdkcmFmdENoYXNzaScsJ2RyYWZ0Q29udHJvbGFkb3InLCdkcmFmdE9icycsJ3NlbmhhT3V0cmFzSW5mb3MnXTsKICAgICAgICAgIF9fa2V5cy5mb3JFYWNoKGs9PnsgdHJ5eyBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrKTsgfWNhdGNoKGUpe30gdHJ5eyBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKGspOyB9Y2F0Y2goZSl7fSB9KTsKICAgICAgICB9Y2F0Y2goZSl7fQogICAgICAgIGxvY2F0aW9uLnJlcGxhY2UoJ2luZGV4Lmh0bWwnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc3Qgb2sgPSBhd2FpdCBjb25maXJtV3JhcCgnQ29uZmlybWHDp8OjbycsJ1RlbSBjZXJ0ZXphIHF1ZSBkZXNlamEgZXhwb3J0YXIgZGFkb3MgZSBzYWlyPycpOwogICAgICBpZiAoIW9rKSByZXR1cm47CiAgICAgIGF3YWl0IHdpbmRvdy5leHBvcnRhclBsYW5pbGhhRmluYWwoZGFkb3NDaGFzc2ksIGRhZG9zQ29taXNzYW8sIGRhZG9zUXVhbGlkYWRlKTsKICAgIH1jYXRjaChlKXsKICAgICAgY29uc29sZS5lcnJvcihlKTsKICAgICAgYWxlcnRXcmFwKCdFcnJvJywnRXJybyBhbyBwcm9jZXNzYXIgYSBmaW5hbGl6YcOnw6NvLicpOwogICAgfQogIH07CgogIC8vIEV4cG9ydGFyIHBsYW5pbGhhIGZpbmFsCiAgd2luZG93LmV4cG9ydGFyUGxhbmlsaGFGaW5hbCA9IGFzeW5jIGZ1bmN0aW9uKGRhZG9zQ2hhc3NpLCBkYWRvc0NvbWlzc2FvLCBkYWRvc1F1YWxpZGFkZSl7CiAgICBpZiAoIWhhdmVMaWJzKCkpeyBhbGVydFdyYXAoJ0Vycm8nLCdCaWJsaW90ZWNhcyBFeGNlbEpTL0ZpbGVTYXZlciBuw6NvIGNhcnJlZ2FkYXMuJyk7IHJldHVybjsgfQogICAgY29uc3Qgd2IgPSBuZXcgRXhjZWxKUy5Xb3JrYm9vaygpOwoKICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gKGtleSkgPT4gKHsKICAgICAgc2V0b3I6ICdTZXRvcicsCiAgICAgIHR1cm5vOiAnVHVybm8nLAogICAgICBjb250cm9sYWRvcjogJ0NvbnRyb2xhZG9yIGRlIGFjZXNzbycsCiAgICAgIGNvbnRyb2xhZG9yQWNlc3NvOiAnQ29udHJvbGFkb3IgZGUgYWNlc3NvJywKICAgICAgY2hhc3NpOiAnTsO6bWVybyBkZSBjaGFzc2knLAogICAgICBudW1lcm9DaGFzc2k6ICdOw7ptZXJvIGRlIGNoYXNzaScsCiAgICAgIG9ic2VydmFjYW86ICdPYnNlcnZhw6fDo28nLAogICAgICBkYXRhSG9yYTogJ0RhdGEgZSBIb3JhJywKICAgICAgb3JpZ2VtOiAnVGlwbyBkZSBjb250cm9sZScKICAgIH1ba2V5XSB8fCBrZXkpOwoKICAgIGZ1bmN0aW9uIGFkZFNoZWV0KG5hbWUsIHJvd3MpewogICAgICBjb25zdCB3cyA9IHdiLmFkZFdvcmtzaGVldChuYW1lKTsKICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHJvd3MpIHx8IHJvd3MubGVuZ3RoID09PSAwKXsKICAgICAgICB3cy5hZGRSb3coWydTZW0gZGFkb3MnXSk7CiAgICAgICAgd3MuZ2V0Um93KDEpLmVhY2hDZWxsKChjZWxsKT0+ewogICAgICAgICAgY2VsbC5mb250ID0geyBib2xkOnRydWUsIGNvbG9yOnthcmdiOidGRjAwMDAwMCd9IH07CiAgICAgICAgICBjZWxsLmFsaWdubWVudCA9IHsgdmVydGljYWw6J21pZGRsZScsIGhvcml6b250YWw6J2NlbnRlcicgfTsKICAgICAgICAgIGNlbGwuZmlsbCA9IHsgdHlwZToncGF0dGVybicsIHBhdHRlcm46J3NvbGlkJywgZmdDb2xvcjp7YXJnYjonRkZGRkZGMDAnfSB9OwogICAgICAgIH0pOwogICAgICAgIHdzLnByb3RlY3QoJycsIHsgc2VsZWN0TG9ja2VkQ2VsbHM6dHJ1ZSwgc2VsZWN0VW5sb2NrZWRDZWxsczp0cnVlIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCBrZXlzID0gWy4uLm5ldyBTZXQocm93cy5mbGF0TWFwKHIgPT4gT2JqZWN0LmtleXMocnx8e30pKSldOwogICAgICBjb25zdCBub3JtS2V5cyA9IGtleXMubWFwKGsgPT4gewogICAgICAgIGlmIChrPT09ImNvbnRyb2xhZG9yQWNlc3NvIikgcmV0dXJuICJjb250cm9sYWRvciI7CiAgICAgICAgaWYgKGs9PT0ibnVtZXJvQ2hhc3NpIikgcmV0dXJuICJjaGFzc2kiOwogICAgICAgIHJldHVybiBrOwogICAgICB9KTsKICAgICAgY29uc3QgdW5pcXVlS2V5cyA9IFsuLi5uZXcgU2V0KG5vcm1LZXlzKV07CiAgICAgIGNvbnN0IGhlYWRlckxhYmVscyA9IHVuaXF1ZUtleXMubWFwKGsgPT4gU3RyaW5nKGRpc3BsYXlOYW1lKGspKS50b1VwcGVyQ2FzZSgpKTsKICAgICAgd3MuYWRkUm93KGhlYWRlckxhYmVscyk7CiAgICAgIHdzLmdldFJvdygxKS5lYWNoQ2VsbCgoY2VsbCk9PnsKICAgICAgICBjZWxsLmZvbnQgPSB7IGJvbGQ6dHJ1ZSwgY29sb3I6e2FyZ2I6J0ZGMDAwMDAwJ30gfTsKICAgICAgICBjZWxsLmFsaWdubWVudCA9IHsgdmVydGljYWw6J21pZGRsZScsIGhvcml6b250YWw6J2NlbnRlcicgfTsKICAgICAgICBjZWxsLmZpbGwgPSB7IHR5cGU6J3BhdHRlcm4nLCBwYXR0ZXJuOidzb2xpZCcsIGZnQ29sb3I6e2FyZ2I6J0ZGRkZGRjAwJ30gfTsKICAgICAgfSk7CiAgICAgIHJvd3MuZm9yRWFjaChyID0+IHdzLmFkZFJvdyh1bmlxdWVLZXlzLm1hcChrID0+IHsKICAgICAgICBpZiAoaz09PSJjb250cm9sYWRvciIpIHJldHVybiByLmNvbnRyb2xhZG9yIHx8IHIuY29udHJvbGFkb3JBY2Vzc28gfHwgIiI7CiAgICAgICAgaWYgKGs9PT0iY2hhc3NpIikgcmV0dXJuIHIuY2hhc3NpIHx8IHIubnVtZXJvQ2hhc3NpIHx8ICIiOwogICAgICAgIHJldHVybiByW2tdICE9IG51bGwgPyByW2tdIDogIiI7CiAgICAgIH0pKSk7CiAgICAgIGhlYWRlckxhYmVscy5mb3JFYWNoKChsYWJlbCwgaSkgPT4gewogICAgICAgIGxldCBtYXggPSBTdHJpbmcobGFiZWx8fCcnKS5sZW5ndGg7CiAgICAgICAgcm93cy5mb3JFYWNoKHIgPT4gewogICAgICAgICAgY29uc3QgdCA9IHIgJiYgKHJbdW5pcXVlS2V5c1tpXV0gfHwgKHVuaXF1ZUtleXNbaV09PT0iY29udHJvbGFkb3IiP3IuY29udHJvbGFkb3JBY2Vzc286IiIpIHx8ICh1bmlxdWVLZXlzW2ldPT09ImNoYXNzaSI/ci5udW1lcm9DaGFzc2k6IiIpKSB8fCAiIjsKICAgICAgICAgIGlmICh0Lmxlbmd0aCA+IG1heCkgbWF4ID0gdC5sZW5ndGg7CiAgICAgICAgfSk7CiAgICAgICAgd3MuZ2V0Q29sdW1uKGkrMSkud2lkdGggPSBtYXggKyAyOwogICAgICAgIHdzLmdldENvbHVtbihpKzEpLmFsaWdubWVudCA9IHsgd3JhcFRleHQ6dHJ1ZSB9OwogICAgICB9KTsKICAgICAgd3MucHJvdGVjdCgnJywgeyBzZWxlY3RMb2NrZWRDZWxsczp0cnVlLCBzZWxlY3RVbmxvY2tlZENlbGxzOnRydWUgfSk7CiAgICB9CgogICAgYWRkU2hlZXQoJ2NvbnRyb2xlIGRlIHZlw61jdWxvcyBpbmR1c3RyaWFsaXphw6fDo28nLCBkYWRvc0NoYXNzaSk7CiAgICBhZGRTaGVldCgnY29udHJvbGUgY29taXNzw6NvIGRlIHNlZ3VybycsIGRhZG9zQ29taXNzYW8pOwogICAgYWRkU2hlZXQoJ2NvbnRyb2xlIGRlIHZlw61jdWxvcyBxdWFsaWRhZGUnLCBkYWRvc1F1YWxpZGFkZSk7CgogICAgLy8gTWVzdHJhIGNvbnNvbGlkYWRhCiAgICBjb25zdCB0YWdnZWQgPSBbCiAgICAgIC4uLihBcnJheS5pc0FycmF5KGRhZG9zQ2hhc3NpKSAgICA/IGRhZG9zQ2hhc3NpICAgIDogW10pLm1hcChyID0+ICh7IG9yaWdlbTonSW5kdXN0cmlhbGl6YcOnw6NvJywgICAuLi4ocnx8e30pIH0pKSwKICAgICAgLi4uKEFycmF5LmlzQXJyYXkoZGFkb3NDb21pc3NhbykgID8gZGFkb3NDb21pc3NhbyAgOiBbXSkubWFwKHIgPT4gKHsgb3JpZ2VtOidDb21pc3PDo28gZGUgU2VndXJvJywgLi4uKHJ8fHt9KSB9KSksCiAgICAgIC4uLihBcnJheS5pc0FycmF5KGRhZG9zUXVhbGlkYWRlKSA/IGRhZG9zUXVhbGlkYWRlIDogW10pLm1hcChyID0+ICh7IG9yaWdlbTonUXVhbGlkYWRlJywgICAgICAgICAgLi4uKHJ8fHt9KSB9KSksCiAgICBdOwogICAgY29uc3QgYWxsS2V5cyA9IFsnb3JpZ2VtJywnc2V0b3InLCd0dXJubycsJ2NvbnRyb2xhZG9yJywnY2hhc3NpJywnb2JzZXJ2YWNhbycsJ2RhdGFIb3JhJ107CiAgICBjb25zdCB3c00gPSB3Yi5hZGRXb3Jrc2hlZXQoJ01lc3RyYSAoY29uc29saWRhZG8pJyk7CiAgICBjb25zdCBoZWFkZXJMYWJlbHMgPSBhbGxLZXlzLm1hcChrID0+IHsKICAgICAgaWYgKGsgPT09ICJvYnNlcnZhY2FvIikgcmV0dXJuICJPQlMuIjsgLy8gQXBlbmFzIG5vIGNvbnNvbGlkYWRvCiAgICAgIHJldHVybiBTdHJpbmcoZGlzcGxheU5hbWUoaykpLnRvVXBwZXJDYXNlKCk7CiAgICB9KTsKICAgIHdzTS5hZGRSb3coaGVhZGVyTGFiZWxzKTsKICAgIHdzTS5nZXRSb3coMSkuZWFjaENlbGwoKGNlbGwpPT57CiAgICAgIGNlbGwuZm9udCA9IHsgYm9sZDp0cnVlLCBjb2xvcjp7YXJnYjonRkYwMDAwMDAnfSB9OwogICAgICBjZWxsLmFsaWdubWVudCA9IHsgdmVydGljYWw6J21pZGRsZScsIGhvcml6b250YWw6J2NlbnRlcicgfTsKICAgICAgY2VsbC5maWxsID0geyB0eXBlOidwYXR0ZXJuJywgcGF0dGVybjonc29saWQnLCBmZ0NvbG9yOnthcmdiOidGRkZGRkYwMCd9IH07CiAgICB9KTsKICAgIHRhZ2dlZC5mb3JFYWNoKHIgPT4gd3NNLmFkZFJvdyhhbGxLZXlzLm1hcChrID0+IHsKICAgICAgaWYgKGs9PT0iY29udHJvbGFkb3IiKSByZXR1cm4gci5jb250cm9sYWRvciB8fCByLmNvbnRyb2xhZG9yQWNlc3NvIHx8ICIiOwogICAgICBpZiAoaz09PSJjaGFzc2kiKSByZXR1cm4gci5jaGFzc2kgfHwgci5udW1lcm9DaGFzc2kgfHwgIiI7CiAgICAgIHJldHVybiByW2tdICE9IG51bGwgPyByW2tdIDogIiI7CiAgICB9KSkpOwogICAgaGVhZGVyTGFiZWxzLmZvckVhY2goKGxhYmVsLCBpKSA9PiB7CiAgICAgIGxldCBtYXggPSBTdHJpbmcobGFiZWx8fCcnKS5sZW5ndGg7CiAgICAgIHRhZ2dlZC5mb3JFYWNoKHIgPT4gewogICAgICAgIGNvbnN0IHQgPSByICYmIChyW2FsbEtleXNbaV1dIHx8IChhbGxLZXlzW2ldPT09ImNvbnRyb2xhZG9yIj9yLmNvbnRyb2xhZG9yQWNlc3NvOiIiKSB8fCAoYWxsS2V5c1tpXT09PSJjaGFzc2kiP3IubnVtZXJvQ2hhc3NpOiIiKSkgfHwgIiI7CiAgICAgICAgaWYgKHQubGVuZ3RoID4gbWF4KSBtYXggPSB0Lmxlbmd0aDsKICAgICAgfSk7CiAgICAgIHdzTS5nZXRDb2x1bW4oaSsxKS53aWR0aCA9IG1heCArIDI7CiAgICAgIHdzTS5nZXRDb2x1bW4oaSsxKS5hbGlnbm1lbnQgPSB7IHdyYXBUZXh0OnRydWUgfTsKICAgIH0pOwogICAgd3NNLnByb3RlY3QoJycsIHsgc2VsZWN0TG9ja2VkQ2VsbHM6dHJ1ZSwgc2VsZWN0VW5sb2NrZWRDZWxsczp0cnVlIH0pOwoKICAgIGNvbnN0IGQgPSBuZXcgRGF0ZSgpOwogICAgY29uc3QgdHVybm9Ob21lID0gKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0dXJubycpIHx8ICdUdXJubycpOwogICAgY29uc3QgZGQgPSBTdHJpbmcoZC5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsJzAnKTsKICAgIGNvbnN0IG1tID0gU3RyaW5nKGQuZ2V0TW9udGgoKSsxKS5wYWRTdGFydCgyLCcwJyk7CiAgICBjb25zdCB5eXl5ID0gZC5nZXRGdWxsWWVhcigpOwogICAgY29uc3QgSEggPSBTdHJpbmcoZC5nZXRIb3VycygpKS5wYWRTdGFydCgyLCcwJyk7CiAgICBjb25zdCBNTSA9IFN0cmluZyhkLmdldE1pbnV0ZXMoKSkucGFkU3RhcnQoMiwnMCcpOwogICAgY29uc3QgZmlsZU5hbWUgPSBgUmVsYXTDs3JpbyAtICR7dHVybm9Ob21lfSAtICR7ZGR9LSR7bW19LSR7eXl5eX0gLSAke0hIfWgke01NfS54bHN4YDsKCiAgICBjb25zdCBidWYgPSBhd2FpdCB3Yi54bHN4LndyaXRlQnVmZmVyKCk7CiAgICBzYXZlQXMobmV3IEJsb2IoW2J1Zl0sIHt0eXBlOiAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQnfSksIGZpbGVOYW1lKTsKCiAgICAKICAgICAgICB0cnl7CiAgICAgICAgICBjb25zdCBfX2tleXM9Wyd1c3VhcmlvJywncmVnaXN0cm8nLCd0dXJubycsJ3RhYmVsYUNoYXNzaScsJ3RhYmVsYUNvbWlzc2FvU2VndXJvJywndGFiZWxhUXVhbGlkYWRlJywnY29udHJvbGVWZWljdWxvc0RhdGEnLCdjb250cm9sZV9pbmR1c3RyaWFsaXphY2FvX2VzdGFkbycsJ2RyYWZ0Q2hhc3NpJywnZHJhZnRDb250cm9sYWRvcicsJ2RyYWZ0T2JzJywnc2VuaGFPdXRyYXNJbmZvcyddOwogICAgICAgICAgX19rZXlzLmZvckVhY2goaz0+eyB0cnl7IGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGspOyB9Y2F0Y2goZSl7fSB0cnl7IHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oayk7IH1jYXRjaChlKXt9IH0pOwogICAgICAgIH1jYXRjaChlKXt9CiAgICBsb2NhdGlvbi5yZXBsYWNlKCdpbmRleC5odG1sJyk7CiAgfTsKfSkoKTs='))</script><script>eval(atob('ZnVuY3Rpb24gdHJvY2FyVXN1YXJpbygpewogIHNob3dDb25maXJtTW9kYWwoewogICAgdGl0bGU6ICdUcm9jYXIgdXN1w6FyaW8nLAogICAgbWVzc2FnZTogJ0Rlc2VqYSB0cm9jYXIgZGUgdXN1w6FyaW8gc2VtIGZpbmFsaXphciBvIHR1cm5vP1xuXG5TZSBlc2NvbGhlciAiU2ltIiwgZmFyZW1vcyBsb2dvdXQgZSB2b2PDqiB2b2x0YXLDoSBhbyBsb2dpbi4gT3MgZGFkb3MgZGFzIHRhYmVsYXMgc2Vyw6NvIG1hbnRpZG9zLCBtYXMgVXN1w6FyaW8vUmVnaXN0cm8gc2Vyw6NvIGFwYWdhZG9zLicsCiAgICBvblllczogZnVuY3Rpb24oKXsKICAgICAgdHJ5IHsKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndXN1YXJpbycpOwogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdyZWdpc3RybycpOwogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0dXJubycpOwogICAgICB9IGNhdGNoIChlKSB7fQogICAgICBsb2NhdGlvbi5ocmVmID0gJ2luZGV4Lmh0bWwnOwogICAgfSwKICAgIG9uTm86IGZ1bmN0aW9uKCl7CiAgICAgIGlmICh0eXBlb2Ygc2hvd0FwcE1vZGFsID09PSAnZnVuY3Rpb24nKXsKICAgICAgICBzaG93QXBwTW9kYWwoewogICAgICAgICAgdGl0bGU6J09wZXJhw6fDo28gY2FuY2VsYWRhJywKICAgICAgICAgIG1lc3NhZ2U6J0RhZG9zIHByZXNlcnZhZG9zLiBQZXJtYW5lY2VuZG8gbm8gbWVudS4nCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWxlcnQoJ09wZXJhw6fDo28gY2FuY2VsYWRhLCBkYWRvcyBwcmVzZXJ2YWRvcy4nKTsKICAgICAgfQogICAgfQogIH0pOwp9'))</script></body></html>